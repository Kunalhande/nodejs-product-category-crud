<!DOCTYPE html>
<html>
<head>
  <title>Category Master</title>
</head>
<body>

<h2>Category Master</h2>

<input id="cat" placeholder="Category Name">
<button onclick="add()">Add</button>

<ul id="list"></ul>

<script>

function load(){
 fetch("/category")
 .then(r=>r.json())
 .then(d=>{
   list.innerHTML=""
   d.forEach(c=>{
     list.innerHTML+=`
     <li>${c.CategoryName}
     <button onclick="del(${c.CategoryId})">X</button>
     </li>`
   })
 })
}

function add(){
 fetch("/category",{
  method:"POST",
  headers:{'Content-Type':'application/json'},
  body:JSON.stringify({CategoryName:cat.value})
 }).then(()=>{
   cat.value=""
   load()
 })
}

function del(id){
 fetch("/category/"+id,{method:"DELETE"}).then(load)
}

load()

</script>

</body>
</html>
